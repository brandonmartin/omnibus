--- ./rlprivate.h.orig	2012-03-22 17:33:17.000000000 -0700
+++ ./rlprivate.h	2012-03-22 17:58:29.000000000 -0700
@@ -130,26 +130,26 @@
  *************************************************************************/
 
 /* complete.c */
-extern int rl_complete_with_tilde_expansion;
+READLINE_DLL_IMPEXP int rl_complete_with_tilde_expansion;
 #if defined (VISIBLE_STATS)
-extern int rl_visible_stats;
+READLINE_DLL_IMPEXP int rl_visible_stats;
 #endif /* VISIBLE_STATS */
 
 /* readline.c */
-extern int rl_line_buffer_len;
-extern int rl_arg_sign;
-extern int rl_visible_prompt_length;
-extern int readline_echoing_p;
-extern int rl_key_sequence_length;
-extern int rl_byte_oriented;
+READLINE_DLL_IMPEXP int rl_line_buffer_len;
+READLINE_DLL_IMPEXP int rl_arg_sign;
+READLINE_DLL_IMPEXP int rl_visible_prompt_length;
+READLINE_DLL_IMPEXP int readline_echoing_p;
+READLINE_DLL_IMPEXP int rl_key_sequence_length;
+READLINE_DLL_IMPEXP int rl_byte_oriented;
 
-extern _rl_keyseq_cxt *_rl_kscxt;
+READLINE_DLL_IMPEXP _rl_keyseq_cxt *_rl_kscxt;
 
 /* display.c */
-extern int rl_display_fixed;
+READLINE_DLL_IMPEXP int rl_display_fixed;
 
 /* parens.c */
-extern int rl_blink_matching_paren;
+READLINE_DLL_IMPEXP int rl_blink_matching_paren;
 
 /*************************************************************************
  *									 *
@@ -337,89 +337,89 @@
  *************************************************************************/
 
 /* bind.c */
-extern const char *_rl_possible_control_prefixes[];
-extern const char *_rl_possible_meta_prefixes[];
+READLINE_DLL_IMPEXP const char *_rl_possible_control_prefixes[];
+READLINE_DLL_IMPEXP const char *_rl_possible_meta_prefixes[];
 
 /* callback.c */
-extern _rl_callback_func_t *_rl_callback_func;
-extern _rl_callback_generic_arg *_rl_callback_data;
+READLINE_DLL_IMPEXP _rl_callback_func_t *_rl_callback_func;
+READLINE_DLL_IMPEXP _rl_callback_generic_arg *_rl_callback_data;
 
 /* complete.c */
-extern int _rl_complete_show_all;
-extern int _rl_complete_show_unmodified;
-extern int _rl_complete_mark_directories;
-extern int _rl_complete_mark_symlink_dirs;
-extern int _rl_print_completions_horizontally;
-extern int _rl_completion_case_fold;
-extern int _rl_match_hidden_files;
-extern int _rl_page_completions;
+READLINE_DLL_IMPEXP int _rl_complete_show_all;
+READLINE_DLL_IMPEXP int _rl_complete_show_unmodified;
+READLINE_DLL_IMPEXP int _rl_complete_mark_directories;
+READLINE_DLL_IMPEXP int _rl_complete_mark_symlink_dirs;
+READLINE_DLL_IMPEXP int _rl_print_completions_horizontally;
+READLINE_DLL_IMPEXP int _rl_completion_case_fold;
+READLINE_DLL_IMPEXP int _rl_match_hidden_files;
+READLINE_DLL_IMPEXP int _rl_page_completions;
 
 /* display.c */
-extern int _rl_vis_botlin;
-extern int _rl_last_c_pos;
-extern int _rl_suppress_redisplay;
-extern int _rl_want_redisplay;
-extern char *rl_display_prompt;
+READLINE_DLL_IMPEXP int _rl_vis_botlin;
+READLINE_DLL_IMPEXP int _rl_last_c_pos;
+READLINE_DLL_IMPEXP int _rl_suppress_redisplay;
+READLINE_DLL_IMPEXP int _rl_want_redisplay;
+READLINE_DLL_IMPEXP char *rl_display_prompt;
 
 /* isearch.c */
-extern char *_rl_isearch_terminators;
+READLINE_DLL_IMPEXP char *_rl_isearch_terminators;
 
-extern _rl_search_cxt *_rl_iscxt;
+READLINE_DLL_IMPEXP _rl_search_cxt *_rl_iscxt;
 
 /* macro.c */
-extern char *_rl_executing_macro;
+READLINE_DLL_IMPEXP char *_rl_executing_macro;
 
 /* misc.c */
-extern int _rl_history_preserve_point;
-extern int _rl_history_saved_point;
+READLINE_DLL_IMPEXP int _rl_history_preserve_point;
+READLINE_DLL_IMPEXP int _rl_history_saved_point;
 
-extern _rl_arg_cxt _rl_argcxt;
+READLINE_DLL_IMPEXP _rl_arg_cxt _rl_argcxt;
 
 /* readline.c */
-extern int _rl_horizontal_scroll_mode;
-extern int _rl_mark_modified_lines;
-extern int _rl_bell_preference;
-extern int _rl_meta_flag;
-extern int _rl_convert_meta_chars_to_ascii;
-extern int _rl_output_meta_chars;
-extern int _rl_bind_stty_chars;
-extern char *_rl_comment_begin;
-extern unsigned char _rl_parsing_conditionalized_out;
-extern Keymap _rl_keymap;
-extern FILE *_rl_in_stream;
-extern FILE *_rl_out_stream;
-extern int _rl_last_command_was_kill;
-extern int _rl_eof_char;
-extern procenv_t readline_top_level;
+READLINE_DLL_IMPEXP int _rl_horizontal_scroll_mode;
+READLINE_DLL_IMPEXP int _rl_mark_modified_lines;
+READLINE_DLL_IMPEXP int _rl_bell_preference;
+READLINE_DLL_IMPEXP int _rl_meta_flag;
+READLINE_DLL_IMPEXP int _rl_convert_meta_chars_to_ascii;
+READLINE_DLL_IMPEXP int _rl_output_meta_chars;
+READLINE_DLL_IMPEXP int _rl_bind_stty_chars;
+READLINE_DLL_IMPEXP char *_rl_comment_begin;
+READLINE_DLL_IMPEXP unsigned char _rl_parsing_conditionalized_out;
+READLINE_DLL_IMPEXP Keymap _rl_keymap;
+READLINE_DLL_IMPEXP FILE *_rl_in_stream;
+READLINE_DLL_IMPEXP FILE *_rl_out_stream;
+READLINE_DLL_IMPEXP int _rl_last_command_was_kill;
+READLINE_DLL_IMPEXP int _rl_eof_char;
+READLINE_DLL_IMPEXP procenv_t readline_top_level;
 
 /* search.c */
-extern _rl_search_cxt *_rl_nscxt;
+READLINE_DLL_IMPEXP _rl_search_cxt *_rl_nscxt;
 
 /* terminal.c */
-extern int _rl_enable_keypad;
-extern int _rl_enable_meta;
-extern char *_rl_term_clreol;
-extern char *_rl_term_clrpag;
-extern char *_rl_term_im;
-extern char *_rl_term_ic;
-extern char *_rl_term_ei;
-extern char *_rl_term_DC;
-extern char *_rl_term_up;
-extern char *_rl_term_dc;
-extern char *_rl_term_cr;
-extern char *_rl_term_IC;
-extern char *_rl_term_forward_char;
-extern int _rl_screenheight;
-extern int _rl_screenwidth;
-extern int _rl_screenchars;
-extern int _rl_terminal_can_insert;
-extern int _rl_term_autowrap;
+READLINE_DLL_IMPEXP int _rl_enable_keypad;
+READLINE_DLL_IMPEXP int _rl_enable_meta;
+READLINE_DLL_IMPEXP char *_rl_term_clreol;
+READLINE_DLL_IMPEXP char *_rl_term_clrpag;
+READLINE_DLL_IMPEXP char *_rl_term_im;
+READLINE_DLL_IMPEXP char *_rl_term_ic;
+READLINE_DLL_IMPEXP char *_rl_term_ei;
+READLINE_DLL_IMPEXP char *_rl_term_DC;
+READLINE_DLL_IMPEXP char *_rl_term_up;
+READLINE_DLL_IMPEXP char *_rl_term_dc;
+READLINE_DLL_IMPEXP char *_rl_term_cr;
+READLINE_DLL_IMPEXP char *_rl_term_IC;
+READLINE_DLL_IMPEXP char *_rl_term_forward_char;
+READLINE_DLL_IMPEXP int _rl_screenheight;
+READLINE_DLL_IMPEXP int _rl_screenwidth;
+READLINE_DLL_IMPEXP int _rl_screenchars;
+READLINE_DLL_IMPEXP int _rl_terminal_can_insert;
+READLINE_DLL_IMPEXP int _rl_term_autowrap;
 
 /* undo.c */
-extern int _rl_doing_an_undo;
-extern int _rl_undo_group_level;
+READLINE_DLL_IMPEXP int _rl_doing_an_undo;
+READLINE_DLL_IMPEXP int _rl_undo_group_level;
 
 /* vi_mode.c */
-extern int _rl_vi_last_command;
+READLINE_DLL_IMPEXP int _rl_vi_last_command;
 
 #endif /* _RL_PRIVATE_H_ */
